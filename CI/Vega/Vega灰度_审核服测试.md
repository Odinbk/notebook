清档，清Mongo，Redis，日志都是手动操作。

整理审核服流程，versions在实现时实现成了覆盖，应该是追加。
后端是否需要增量更新。
发布审核服的天梯流程需要指导说明文档.
发布审核服需要在两个部署位置上做操作。
停运的platform现在不在walle同步的范围内，需要明确。
审核服release type现在不能正确过滤出线上版本。
几个有大table的页面支持分页
天梯添加，删除审核权限

5.9对外测试，4.23封需求，4.26封版打包合并代码数值，4.29提包给大神圈 
大家周知一下tdev不能动@所有人 

## 审核服测试

## 测试用例

* 打审核服包，在审核服部署位置发布。
  * 执行审核服发布脚本，版本相关信息写入审核服ZooKeeper
  * 执行正式服同步脚本，版本相关信息写入正式服ZooKeeper
* 打审核服更新包，在审核服部署位置发布。
  * 执行审核服发布脚本，版本相关信息写入审核服ZooKeeper
  * 执行正式服同步脚本，版本相关信息写入正式服ZooKeeper
* 打正式服更新包，在正式服部署位置发布。
  * 执行正式服发布脚本，版本相关信息写入正式服ZooKeeper
* 切审核服到正式服
  * 执行取消审核服脚本.

### 问题

* 发布审核服，托马斯把更新包推送到了按照部署位置区分的CDN目录，导致vms返回给前端的更新包地址不匹配。
* 审核服的发布操作，需要先发布审核服，再发布正式服。由于天梯流程执行在不同的部署位置，不能串联起来，容易忘记导致出错。

## 灰度服测试

### 前置条件

* 先用各模块最新的tag出正式服底包

### 测试用例

* 打灰度包，在客户端选择灰度服
* 正式服打升级包，客户端选择正式服
* 灰度服打升级包，客户端选择灰度服
* 取消灰度

### 问题

* Walle上已发布的灰度版本显示还是未部署
* Walle上模块Tag是按照ID来排序的，存在连续打两个tag，后打的先完成，导致后打的Tag在排序上落后于先打的Tag。
* 底包1146，灰度包1148，灰度包选了可更新，强制玩家下线，最小可更新版本1029。 灰度版本发布后，1146不能更新到1148. 客户端兼容版本字段只有1148， 该字段由vms返回给Walle。在正式服游戏过程中，游戏区切换为灰度服，发送给vms的请求参数，section=2, gray_version='', prod_version=1146.
* 进游戏不选区，前端发送给vms的请求中缺少section_id。


## 审核服测试 

## 测试用例 

* 打审核服包，在审核服部署位置发布。 
* 执行审核服发布脚本，版本相关信息写入审核服ZooKeeper 
* 执行正式服同步脚本，版本相关信息写入正式服ZooKeeper 
* 打审核服更新包，在审核服部署位置发布。 
* 执行审核服发布脚本，版本相关信息写入审核服ZooKeeper 
* 执行正式服同步脚本，版本相关信息写入正式服ZooKeeper 
* 打正式服更新包，在正式服部署位置发布。 
* 执行正式服发布脚本，版本相关信息写入正式服ZooKeeper 
* 切审核服到正式服 
* 执行取消审核服脚本. 

### 问题

* 发布审核服，托马斯把更新包推送到了按照部署位置区分的CDN目录，导致vms返回给前端的更新包地址不匹配。 
* 审核服的发布操作，需要先发布审核服，再发布正式服。由于天梯流程执行在不同的部署位置，不能串联起来，容易忘记导致出错。 

## 灰度服测试 

### 前置条件 

* 先用各模块最新的tag出正式服底包(ver:1)

### 测试用例 

- 灰度服更新(gray_ver:1) 
- 客户端选择灰度服然后更新版本：(ver:1)==>(gray_ver:1) 
- 再切回正式服 
- 灰度服更新(gray_ver:2) 
- 客户端如果上次是在灰度服，直接更新版本：(gray_ver:1)==>(gray_ver:2) 
- 如果是在正式服，选择灰度服然后更新版本：(ver:1)==>(gray_ver:2) 
- 再切回正式服 
- 正式服更新(ver:2)： 
- 灰度服解除灰度，一起更新版本：(ver:1)==>(ver:2)/(gray_ver:2)==>(ver:2) 
- 灰度服不解除灰度，先更新版本：(ver:1)==>(ver:2) 
- 本地有灰度服版本：正式服可以直接切换灰度服 
- 本地没有灰度服版本，需更新版本：(ver:1)==>(gray_ver:2) 
- 再切回正式服 
- 正式服更新(ver:3)： 
- 同上 

### 问题

* Walle上已发布的灰度版本显示还是未部署 
* Walle上模块Tag是按照ID来排序的，存在连续打两个tag，后打的先完成，导致后打的Tag在排序上落后于先打的Tag。 
* 底包1146，灰度包1148，灰度包选了可更新，强制玩家下线，最小可更新版本1029。 灰度版本发布后，1146不能更新到1148. 客户端兼容版本字段只有1148， 该字段由vms返回给Walle。在正式服游戏过程中，游戏区切换为灰度服，发送给vms的请求参数，section=2, gray_version='', prod_version=1146. 
* 进游戏不选区，前端发送给vms的请求中缺少section_id。