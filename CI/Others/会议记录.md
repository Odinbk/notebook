# 2019-Q1目标

## 需求整理

* 理清游戏生命周期，开发在什么阶段接入CI/CD. 项目组需要我们什么样的支持。
* 测试什么时候介入，测试的生命周期，测试会有几轮。
* 整理CI的需求文档，客户端的CI需求。 Lua，C#，数值表测试需求。
* WalleUI，第一版，接入Dk和Vega.
* 收集清楚Kubernetes的需求，运维，支撑。

## 目标

DK，Vega 前后端接入CI/CD。 文档， CI/CD， 测试。
团队建设。待定。
Kubernetes。

# 2019-12-10 Kubernetes需求会议记录

## Kubernetes

### 目标：

1. 理清技术支撑部目前的都有哪些项目，项目的功能，作用，部署特点，web项目之间关系，web项目和游戏项目间的关系，
2. web 项目在容器化目前的模式和 CI/CD 过程中遇到的难点和需要的支持

### 当前的工具项目

#### 可以被新的CI/CD流程和通用解决方案替代

* serviceweberror / 服务端日志收集，集中管理日志，可视化。/ 完全可以被ELK替代。
* Deploy / 高达 / 自助部署web项目 / 与先前web项目的K8s流程重叠。
* Devops / 讲武堂 / 自助式安装服务。
* clientweblog / 服务端打点 -- 被数数的系统替代

#### 已下线 / 未接入

* thelper -- 可能已下线
* fms -- 已下线
* ldap / 雷霆 / 已下线
* flow -- 已下线
* realtime -- 已下线。
* CM / 自定义监控 / 已下线 / 在用目前OPS在做的监控系统替代
* noticeweb / 通知系统。/ 没有接，不在使用。
* noticeapi  / 通知系统api。/ 没有接，不在使用。

#### 已部署到K8s

* cmdb
* ucenter
* GMTools / OMtools (新版本的GMTools)

#### 有部署到K8s的需求

* Report / 数据分析系统
* 发行中心采购的发行业务系统
* CD-Key Server

* HR -- Unknown
* Customer / 玩家反馈系统
* cmdbapi
* ucenterapi
* WalleUI
* Workflow / 天梯 / 游戏发布版本。
* Thomas / 上传安装包到RC / Rsync, FTP。

### 痛点 / 要解决的问题

* K8s运维方案，Guideline。周边工具，最佳实践，知识库，人才培养。
* K8s调试办法；日志收集，统计分析。
* K8s配置编排工具。
* 线上软硬件环境图谱。

## Devops 2019-Q1季度目标(初稿)

### 目标1：Kubernetes在技术支撑部门的改造工作推进

* 整理出K8s运维的Guildline和最佳实践，产出文档；建立K8s相关的知识库；Devops内部和产品项目做一轮知识分享。
* DK和Vega项目的测试环境接入Kubernetes，生产环境待定。
* 整理和绘制Ops维护的系统部署图谱，摸清目前运行系统的情况。
* 建立业务监控体系，监控指标，报警机制，线上问题响应机制。

### 目标2：持续集成和持续发布

* DK和Vega的客户端，服务器端接入CI/CD流程。
* 公司内部系统接入CI/CD流程，Walle，数据平台Report， 发行业务系统，CD-Key Server (待定)。
* 产出接入流程文档，内部和项目组做知识分享。

### 目标3： 团队建设

* 梳理面试流程，考核点；面试参与者培训。
* 建立团队内部知识分享机制；新员工培养。
* 明确工作职责，主动参与到项目交付流程中。支持DK，和Vega的交付过程；支持Walle，数据平台Report，发行业务系统，CD-Key Server (待定)等技术中心项目的交付过程。

目标：

1. 理清游戏的生命周期，开发组接入CI/CD的时间点和流程. 项目组需要Devops提供哪些支持.
2. 测试人员在游戏项目中何时介入，游戏测试的生命周期，游戏测试在各个阶段会发生几轮.

## 研发

  每个阶段结束都会有评审

  * 立项 / 制作人，美术，Boss
  * Demo / 实现核心战斗玩法 （审核重点） / 制作人，策划，开发，美术 / 持续2~3个月
  * Alpha / 具体实现，外围玩法 / 制作人，策划，开发，美术，测试 / 开发时间不确定 / 可能需要测试中心介入；在此阶段也可能就开始接入各种运维和运营系统。Alpha阶段开始接入打包。
  * Beta / 调优，内部测试，外部测试 / 制作人，策划，开发，美术，测试，运营，运维 / 渠道，成本，游戏质量，决定了测试时间，测试几轮。运营在这个阶段介入，数据统计，经分，打点，运营活动需求，cd-key， GM；接入打包系统，发包，监控，错误统计，数据统计系统；开发者做脚本开发，测试性能，容灾，专家组定标准， 测试中心验收。客户端做性能，内存调优。

## 运营

  * 试运营，小规模测试 / 开发，测试，测试中心，制作人，策划，运营，运维（横向支撑）/ 开发接入渠道SDK，真正接入用户。测试确认用户提交的Bug，正常的功能测试，确认bug fix。运维On Demand支持，切换版本，服务器状况。接口人会是后端主程，在研发阶段的运维会在运营阶段持续提供支持。
  * 上线 / 大规模导流量，付费，不删档。/ 开发，测试，测试中心，制作人，策划，运营，运维（横向支撑）/ 职责和试运营阶段大致一样，项目后期合并服务器，缩减机器。需求合服，数据库合服，入口合并，技术合服。渠道，影响打包，数据统计，sdk接入，等。

## 停服

  * 运维发公告，服务下线，服务下线。


## Devops支持：

* CI/CD，打包，发包（Walle），上传/解压/分发(Thomas)，线上流程，发版本，切版本，生成配置文件，切维护，执行线脚本(天梯).
* 监控/报警，统计，GMTools / OMTools，CD-Key Server(关华），系统资源监控 -- Ops响应处理，应用监控指标（框架级，项目玩法级）-- 后端主程响应，分发任务给运维或者程序（队列堆积，读写比）。客户端奔溃闪退监控。Buggly（Tencent监控SDK），2D在开发轻量级的监控工具。 错误监控，日志分级。Debug，info日志默认关闭，需要时打开，通过文件支持。

2. 测试人员在游戏项目中何时介入，游戏测试的生命周期，游戏测试在各个阶段会发生几轮.

* 制作人决定发版本，测试给出质量建议，风险警示。
* 测试在Alpha阶段介入，持续整个生命周期。
* 大小版本测试发布流程每个组有自己的情况和标准。
* 大型游戏，上大平台会有灰度发布。时长取决于测试情况，游戏玩法，游戏内容等因素。


## 需求整理

* 理清游戏生命周期，开发在什么阶段接入CI/CD. 项目组需要我们什么样的支持。
* 测试什么时候介入，测试的生命周期，测试会有几轮。
* 整理CI的需求文档，客户端的CI需求。 Lua，C#，数值表测试需求。
* WalleUI，第一版，接入Dk和Vega.
* 收集清楚Kubernetes的需求，运维，支撑。


## 前端单元测试需求

### C#

* Lib，算法，基础模块，规范检查，代码风格。
* 自动化新手引导过程测试
* 核心玩法

### Lua

* 基础模块，规范检查，代码风格。Global变量检查。

### 数值表

* 类型，数据，级联表引用的检查。
* 数值表公式。
* 前后端数值表版本匹配。