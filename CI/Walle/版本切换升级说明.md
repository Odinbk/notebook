# 版本更新逻辑说明

## 名词解释

客户端版本包分为安装包(强更包)和更新包两种。

* 安装包: 指直接下载安装后即可使用的包。iOS包后缀为.ipa, Android包的后缀为.
* 更新包: 更新包不能直接安装。它的作用是通过叠加的方式，把安装包底包更新到最新的版本。更新包后缀为.7z。

*更新示意图*

![更新](/CI/Walle/materials/upgrade.png)

由于种种原因，有时我们不希望玩家通过更新的方式获取到游戏的最新版本，而是从市场上下载最新的安装包，此时我们称这种安装包为强制更新包（强更包）。

*强制更新示意图*

![强制更新](/CI/Walle/materials/force_upgrade.png)

由于安装包需要发行渠道审核，且数据表明，更换安装包会有一定数量的用户流失，所以发布安装包是非常谨慎的，一般都会选择通过更新包升级版本。
在测试阶段，创建安装包没有特别限制。但是由于安装包包体远大于更新包，打包，下载已经安装的时间消耗也都比更新要耗时，具体使用哪种方式，根据实际情况判断。

## 如何创建

如何使用WallE创建客户端包。

1. 选择要更新的模块版本。

![选择要打包的模块版本](/CI/Walle/materials/build_package.png)

2. 创建安装包。

![安装包](/CI/Walle/materials/install_package_only.png)

3. 只创建更新包。

![更新包](/CI/Walle/materials/upgrade_package_only.png)

4. 同时创建安装包和更新包。

为了测试方便，有时我们会选择同时构建安装包和更新包。

![更新包/更新包](/CI/Walle/materials/install_package_and_upgrade_package.png)

5. 剔除某些版本的可更新状态。

![选择更新包](/CI/Walle/materials/select_upgradable.png)

真实场景中，更新不是如最开始的示意图小版本增量更新。 为了使更新包包体尽可能的小，和玩家能有更顺畅的更新体验，实际的更新是跨版本更新。

*跨版本更新示意图*

![跨版本更新](/CI/Walle/materials/upgrade_reality.png)
