# DevOps项目组周报

## 本周工作

### Vega

* 完善蓝鲸通用模板，各个集群共用一套模板，更方便使用、维护
* T-IDC-PR2、T-IDC-Business集群zk、mq等由单节点扩容到三节点，解决扩容中遇到的各种问题
* 和腾讯方沟通下2轮测试的准备工作
  * Tools日志接入骏鹰
  * 添加监控与报警
  * 预约数据清档及区服配置更改时间
* 多Game压力测试: 采用jmeter的master-slave模式，5台game server，10个jmeter slaves，mongodb cpu会达到90以上，GS cpu达到70左右，单机注册、登陆QPS 200左右
* jenkins版本升级，以便更好控制CI并发
* world meta自动生成方案测试、优化
* 梳理优化多game压测脚本，以便后续排队机制压力测试
* 搭建2套新的鹰眼以支持项目组同时三个测试
  * pr1测试鹰眼
  * 商业化测试鹰眼

### TKW

* TKW腾讯轻测支持，解决MongoDB清档的问题，调整自动化清档脚本。

### GBF

* WallE上添加接口，获取模块最新的tag列表。
* Jenkins上创建GBF开发期打包任务，适配开发期的打包需求。

### YK

* 在阿里云部署备用CDN服务。
* 整理更新线上运维文档
* 修改日志归档脚本，适配YK项目新的目录结构

### DevOps

* 天梯适配蓝鲸CMDB API存在Python版本不兼容的问题，本周升级了天梯的django框架版本到支持Python3.6+的 2.2版本。本地完成相关的测试，下周部署上线。
* K8s自建集群迁移到阿里云托管集群，完成部分项目的迁移，预计下周末完成全部项目。

## 下周计划

* Terraform 推进
* 天梯对接蓝鲸CMDB API。
* 继续阿里K8s迁移到托管集群。
* GBF自己运维的3台打包机重做，迁移到CI/CD环境。
* 回归 mongo 清档按 table 删除后依旧有残留角色的问题。
