# DevOps项目组周报

## 本周工作

### Vega

* 生成WorldServer各种服务和主机Mapping关系的脚本测试，测试验收通过。
* PR2、商业化测试集群搭建、问题处理
* 灰度功能回归测试完毕，解决了所有已发现问题
* sec2server、world meta自动生成测试验收并更新到IDC内部，后面几轮测试均采用
* 苹果新审核服不再搭建，暂用prerelease来提审，申请的服务器扩容到PR1、Business集群
* QQ、WX分渠道方案沟通、确认，修改运维脚本支持
* sec2server发生变更时增加钉钉通知
* 内网开发机数据库迁移到新机器，并对基础服务分配域名，项目组通过域名访问
* 多game压力测试

### TKW

* TKW后端模块容器化部署，创建Jenkins任务完成各模块镜像搭配，尝试在开发环境和测试环境使用。

### GBF

* CI/CD接入基本完成：CI，整包，更新包，mini + 扩展包的用例都已经对接完成。
* 存在一些细节问题，例如公司WIFI网络环境加载扩展包速度慢等，后续跟进解决。

### YK

* 上线前预演，[预演报告](https://topjoy.yuque.com/tsd/services/dgltqf#bcc6), 大部分用例通过，若干细节问题下周郑伟和项目组跟进。

### DevOps

* 调研通过Gitlab实现Terraform Backend Status管理和维护。需要Gitlab升级到13.x版本，安排在周日持续滚动升级中。
* 通过蓝鲸CMDB API添加/更新/删除资产。
* K8s自建集群迁移到阿里云托管集群，完成 terra, hrwiki, wifipwd。
* 日本集群上线omtools。  
* 测试Pillar适配蓝鲸CMDB API结果，文档更新。
* WallE适配蓝鲸CMDB API，基于GBF CICD集群联调测试。
* 天梯适配蓝鲸CMDB API，代码重构。 -- 开发中。

## 下周计划

* Terraform 推进
* 天梯对接蓝鲸CMDB API。
* 继续阿里K8s迁移到托管集群。
* GBF自己运维的3台打包机重做，迁移到CI/CD环境。
