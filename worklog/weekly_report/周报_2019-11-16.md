# DevOps项目组组周报

## 本周工作

|支持项目|工作内容|进度|备注|
|---|---|---|---|
|Vega|重新设计Assets CI流程：<br>1. CI执行环境从OpenStack Linux虚拟机迁移到MacMini，方便深圳办公室部署。<br>2. TP Licence提前在MacMini上激活，通过多开进程最大化利用TP Licence。<br>3. MTool版本更新通过从源代码安装达成，在python virtualenv中执行。| 80% | PR1测试结束后部署 |
|Vega| 调整Vega Tool运维脚本步骤超时时间，从1分钟调整为5分钟，降低在腾讯环境发布执行失败率。 | 100% | |
|Vega| 整理签名服务环境搭建文档，为深圳驻场做准备。 | 100% | [签名服务搭建](https://git.youle.game/TC/TSD/documents/wikis/shenzhen-sign) |
|Vega| 整理深圳驻场需要的代码仓库清单。 | 100% | [仓库清单](https://git.youle.game/TC/TSD/documents/wikis/git-svn-address) |
|TKW|Config CI产出的数值结果通过脚本直接提交到一个独立的GIT中间仓库中，开发通过张军提供的工具获取直接可用的数值结果。<br>获取数值的方式也可以考虑把数值中间仓库作为submodule挂载到C#仓库中，这样可以方便的在不同分支，不同版本的数值间切换。| 100%||
|TKW| 讨论方案支持在一台服务器上部署多个区服，每个区服由多个GameServer支撑。在测试环境模拟多种环境情况。| 50% | 开发启服脚本中，下周三交付测试。|
|DK| Tools脚本调整，适配合服后一台GameServer对应多个区服的变化。整理合服操作流程。 | 100% | [合服流程](https://git.youle.game/TC/TSD/OPS/documents/wikis/DK%E5%90%88%E6%9C%8D%E6%B5%81%E7%A8%8B) |
|PDG|为PDG的应用提供部署在k8s集群的Staging环境| 9/9||
|DevOps|审核服设计文档| 100%| [审核服设计](https://git.youle.game/TC/TSD/DevOps/dune/wikis/elastic_release) |
|DevOps|组内K8s知识分享：基本概念，架构编排，资源文件开发。| 100%| |

## 下周计划

* 本周若干基础服务出现故障：jenkins服务崩溃数次；openstack故障，数据库不可用；阿里云ssh 22端口连接故障。下周组内讨论方案，例如把重要服务迁出openstack等。
* 继续在组内进行K8s知识培训，讲解支撑部项目部署方式，整理文档。以防K8s环境故障，关键成员联系不到导致严重后果。
* 整理基础服务例如svn，git，jenkins等搭建相关文档，为部署深圳办公室环境做准备。
* 跟进Vega Assets中部分资源不区分平台，部分资源区分平台CI需求。
* 跟进TKW客户端提出的关于开发环境，定时代码编译，静态检查，冒烟测试的需求。
