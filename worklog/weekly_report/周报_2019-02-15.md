# Walle项目周报

## 项目接入/安排

### DK

接口人：杨光

#### 项目安排

* 3月16，19，27有打包安排。
* 3月28日左右对外测试。
* 3月11日Walle停止新功能上线，iOS能打出包，完成新的热跟新流程。开服清库流程提前演练。

### Vega

接口人：杨光，郑莹莹

#### 打包系统接入

* 时间： 2019-02-10 ~ 2019-02-22
* 接入内容： 前后端CI接入，正常打包出包，天梯发布。 热更/审核服/灰度发布不在这期接入范围。
* 进展
  * 后端：
    * CI接入，构建生成jar包，上传RC。-- 完成
    * 确定ZooKeeper配置格式 -- 进行中
    * 代码修改，从ZooKeeper中获取配置 -- 进行中
    * 打包脚本 -- 未开始
    * 天梯服务器状态控制脚本 -- 未开始
    * 接入新的Notice和VMS服务 -- 未开始

  * 前端
    * CI接入:
      * Asset接入CI -- 进行中
      * 数值表接入CI -- 进行中 / CI脚本验证通过，新打包系统的vega专用的svn账号权限有问题，周一联调。
      * VegaC接入CI -- 未开始
      * VegaLua接入CI -- 未开始
    * 打包脚本 -- 未开始

  * Walle
    * 测试环境 Walle / Jenkins / RC / 打包机 准备 -- 完成
    * 从CMDB同步游戏和部署位置信息 -- 完成
    * Jenkins做权限隔离 -- 有方案 / 未开始
    * RC权限隔离 -- 有方案 / 未开始
    * 天梯脚本 -- 未开始

* 接入过程中发现的问题:
  * 打包机配置docker，jenkins-slave花费时间较长。之前对接dk时解决过的问题留下的文档比较分散，这次准备vega打包机过程中把相关的文档整合在一起，做成Step By Step的指引。
  * 创建CI用的SVN钩子时，把Vega正在使用的post-commit错误的覆盖了。被覆盖的钩子没有备份，目前在根据项目组的需求恢复中。在创建SVN钩子的服务中做检查，发现存在项目组自己维护的钩子，做备份，停止创建CI的钩子。

### NCC

接口人：郑伟

* 4月15日 ~ 4月30日 小米测试。 打包用老Walle UI。
* 计划4月初接入。
* 项目组已经按讨论结果对代码仓库做修改。如：拆分数值表为独立的仓库。

### YK

接口人：N/A

* 计划5月初接入。

## Walle功能开发

### 苹果审核服/灰度发布

* 讨论方案。
* 支持审核包过审后切换为线上包。
* 重构生成ZooKeeper配置文件的代码，支持审核服和灰度发布。

### GameStatic/Patch

* GameStatic/Patch Walle UI支持完成，后端VMS相应接口完成后联调。

### DK前端项目支持

* iOS打包编译出错问题排查。
* 打包跳过视频文件功能。

### Walle功能优化

* Jenkins任务组织方式调整。
* 从CMDB获取Game，部署位置基础信息。
