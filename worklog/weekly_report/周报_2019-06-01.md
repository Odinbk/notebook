# Walle项目周报

## Vega CI/CD接入

* 除审核服流程外，其他功能接入完成。灰度发布测试由于打包策略调整还得做一轮验收测试。
* 下周计划讨论将发布包和配置分离，可能会对流程继续调整，为了避免重复工作，暂停灰度和审核服的验收测试。
* Vega在打包流程调整完毕后需要迁移到正式环境的Walle和Jenkins。
* RC缓存迁移无进展。

## 对接腾讯IDC

### 天梯流程梳理

* 天梯流程和打包脚本中都有从CMDB取数据的逻辑，需要能够支持从腾讯的CMDB获取数据的逻辑。
* 基于Matt给的腾讯CMDB数据样本，摸清字段的意思，于Topjoy的CMDB字段关系，重构天梯脚本，兼容内网发布和腾讯发布的场景。
* 天梯要执行的脚本一部分在运维管理的项目tools仓库，一部分在项目组管理的pipeline仓库，需要集中整理到一起。

### 打包流程调整

* Vega后端提出热更新meta和线上动态扩展gameserver的需求。
* 由于配置被写入了后端包中，导致配置需要更新或者CMDB中数据更新时必须重新发包。限制了线上服务动态伸缩的能力。对于这个问题下周一约了会和专家组讨论。

## Walle功能开发

* GIT/SVN版本对比功能在开发中 -- 50%完成。
* 支持审核/灰度版本和正式版本之间双向打包。-- 完成
* 用户可以编辑挑选可更新到当前构建版本的历史版本的功能。-- 完成
* Vega项目内部Jenkins实例迁移到DevOps运维的Jenkins服务。-- 完成
* [重签名](https://walle4.youle.game/reviewer/resign_view/)功能已部署上线. -- 张军验收完成。
![global_role](/CI/Walle/materials/sign.png)
![global_role](/CI/Walle/materials/sign_jenkins.png)

### 相关文档

* Jenkins任务组织方式调整, 已完成上线。[说明文档](https://git.youle.game/TC/TSD/DevOps/dune/wikis/jenkins_authorization)
* [CI/CD系统接入Step By Step文档](https://git.youle.game/TC/TSD/DevOps/dune/wikis/integrate_walle_step_by_step)
* GameStatic/Patch。[使用说明](https://git.youle.game/TC/TSD/DevOps/dune/wikis/Release-Note-v0.1.2)
* [服务器端灰度/审核服方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%90%8E%E7%AB%AF%E6%96%87%E6%A1%A3/appstore_review_and_gray)
* [客户端灰度发布方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3/gray-server)
* [客户端审核服方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3/apple-review-version)