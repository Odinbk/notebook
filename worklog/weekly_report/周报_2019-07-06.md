# DevOps项目组组周报

## Walle

### Vega CI/CD接入

* 联调测试审核服方案，修复遇到的问题。 -- 进行中
* 迁移到正式环境的：Walle，Jenkins任务迁移，代码仓库合并到主分支等。
* 在7月中旬完成以上所有工作，Vega可以用新的打包流程稳定出包。
* 合适的时间点下线老打包系统，回收相关资源，空闲出来的打包机加入到新系统。

### 对接腾讯IDC

* 游戏服务在腾讯提供的测试集群上已经可以启动。
* 整理运维流程，内容，下周开始和腾讯运维联调运维流程。

## Walle功能开发

* Walle提供查看和配置项目组CI，CD过程中使用到的特殊参数配置。-- 发布上线

## 内部项目容器化部署

* 鹰眼，webcms接入CI/CD流程，容器化发布。
* 调研测试TexturePacker容器化授权问题
  * TexturePacker可以授权至多两台设备。
  * 容器必须运行在TexturePacker授权的宿主机上，意味着Assets模块的CI过程必须运行在某台TP授权的打包机上。
  * 可以在TexturePacker授权的宿主机上并行启动多个docker容器。
* 调查CCSUIExporter在Mac docker容器中处理缓慢的问题。
  * CCSUIExporter在Mac docker容器中比ubuntu docker容器慢十多倍。可能的原因是文件系统差异，还在调查中。

## 监控

* 调研监控报警工具PagerDuty，制定[报警机制](https://git.youle.game/TC/TSD/OPS/documents/wikis/pagerduty%E5%B9%B3%E5%8F%B0%E8%B0%83%E7%A0%94%E4%B8%8E%E6%8A%A5%E8%AD%A6%E6%9C%BA%E5%88%B6)
* 完善MongoDB，Redis，ZooKeeper，RabbitMQ等中间件的Prometheus监控配置。
* 调查解决CMDB账号同步到LDAP失败的问题。

## 容灾

* DHCP和DNS服务备份及恢复

### 相关文档

* [Jenkins任务组织](https://git.youle.game/TC/TSD/DevOps/dune/wikis/jenkins_authorization)
* [CI/CD系统接入Step By Step文档](https://git.youle.game/TC/TSD/DevOps/dune/wikis/integrate_walle_step_by_step)
* [GameStatic/Patch](https://git.youle.game/TC/TSD/DevOps/dune/wikis/Release-Note-v0.1.2)
* [服务器端灰度/审核服方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%90%8E%E7%AB%AF%E6%96%87%E6%A1%A3/appstore_review_and_gray)
* [客户端灰度发布方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3/gray-server)
* [客户端审核服方案](https://git.youle.game/TC/TSD/DevOps/dune/wikis/%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3/apple-review-version)
* [svn备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/%E6%96%B0SVN%20%E5%A4%87%E4%BB%BD%E5%8F%8A%E6%81%A2%E5%A4%8D)
* [git备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/GitLab%20%E5%A4%87%E4%BB%BD%E5%8F%8A%E6%81%A2%E5%A4%8D)
* [jenkins备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/Jenkins%20%E5%A4%87%E4%BB%BD%E5%8F%8A%E6%81%A2%E5%A4%8D)
* [openldap备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/Openldap%20%E5%A4%87%E4%BB%BD%E5%8F%8A%E6%81%A2%E5%A4%8D)
* [dhcp备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/DHCP-备份及恢复)
* [dns备份及恢复](https://git.youle.game/TC/TSD/OPS/documents/wikis/DNS-备份及恢复)
* [监控报警机制](https://git.youle.game/TC/TSD/OPS/documents/wikis/pagerduty%E5%B9%B3%E5%8F%B0%E8%B0%83%E7%A0%94%E4%B8%8E%E6%8A%A5%E8%AD%A6%E6%9C%BA%E5%88%B6)