# 功能 / 接口测试

测试服务对外暴露的接口的可用性和正确性。

## 测什么

被测试服务暴露给暴露使用的功能接口。例如：

* Django的view
* 游戏后端服务给前端提供数据的接口
* VMS提供的游戏版本信息的接口

## 怎么测

根据接口协议构造好请求，发送给被测试模块检查返回结果是否符合预期。

* HTTP
* TCP

不建议使用客户端工具，例如Postman等。因为不方便自动化。

## 环境

功能 / 接口测试需要服务的下游依赖联通，所以测试用例中不应该使用Mock。
在假设外围依赖都工作正常的前提下，测试被测模块本身.
对于下游依赖要启动真实的模块，必要的话需要准备好测试数据。现实中有时下游依赖的不是一个模块，而是一条依赖链或者依赖树。 这种场景下准备测试数据会变得异常麻烦， 所以Fake下游依赖会是更好的选择。我们在这把要被Fake的模块都称为桩。

我们可以根据通信协议提前准备好不同的桩，制作成docker image以便使用。

功能 / 接口测试的环境可能很复杂：需要很多外部依赖的支撑， 也可能很简单：独立提供功能的服务。建议统一使用Jenkins + K8s的工作流来编排环境，方便维护。

## 谁来维护

由于需要准备测试环境和测试数据会花费比较多的时间，所以功能 / 接口测试不应该由开发者来实现。需要由有一定开发经验的测试工程师常驻在项目组来配合。
环境的部分可以有devops提供支持，协助开发组编排搭建。

